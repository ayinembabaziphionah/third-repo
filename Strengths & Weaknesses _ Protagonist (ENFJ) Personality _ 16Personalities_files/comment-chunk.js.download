(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{LnOb:function(t,e,n){"use strict";n.r(e);var o={name:"CommentListForArticles",extends:n("WZgE").a,SHOW_LIKE_BUTTON:!0,SHOW_PRIVATE_USERS:!1,SHOW_COMMENT_FORM:!1,SUBCOMMENT_KEY:"subComments",methods:{GET_POST_DATA_FN:function(t,e,n,o){return{contentType:t,contentId:e,parentCommentId:n,content:o}}}},i=n("KHd+"),a=Object(i.a)(o,void 0,void 0,!1,null,null,null);e.default=a.exports},WZgE:function(t,e,n){"use strict";var o={name:"CommentNew",props:{auth:{type:Boolean,default:!1}},methods:{create:function(){this.$emit("create")},login:function(){this.openModal("login")}}},i=n("KHd+"),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.auth?n("button",{staticClass:"btn btn-action action-add",on:{click:t.create}},[t._v("\n    Add Comment\n")]):n("div",{staticClass:"need-login"},[t._v("\n    Please "),n("a",{staticClass:"with-border",attrs:{href:"javascript:"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("log in")]),t._v(" to join the discussion.\n")])}),[],!1,null,null,null).exports,s={name:"CommentAnonymous",props:{self:{type:Boolean,required:!0},date:{type:String},dateDiff:{type:String}}},r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"user-info"},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"name"},[t.self?n("span",[t._v("You")]):n("span",[t._v("Anonymous")])])]),t._v(" "),n("div",{staticClass:"date"},[n("span",{attrs:{title:t.date}},[t._v(t._s(t.dateDiff||t.date))])])])])}),[],!1,null,null,null).exports,c={name:"CommentUser",props:{avatar:{type:String},profileUrl:{type:String},self:{type:Boolean},userName:{type:String},personalityType:{type:String},personalityCode:{type:String},date:{type:String},dateDiff:{type:String}}},l={name:"CommentMeta",components:{CommentAnonymous:r,CommentUser:Object(i.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.avatar?n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar}})]):t._e(),t._v(" "),n("div",{staticClass:"user-info"},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"name"},[t.profileUrl?n("a",{staticClass:"with-border",attrs:{href:t.profileUrl}},[t.self?n("span",[t._v("You")]):n("span",[t._v(t._s(t.userName))])]):t.self?[t._v("You")]:[t._v(t._s(t.userName))]],2),t._v(" "),n("span",{staticClass:"separator"},[t._v("•")]),t._v(" "),n("div",{staticClass:"type"},[t._v(t._s(t.personalityType)+" ("+t._s(t.personalityCode)+")")])]),t._v(" "),n("div",{staticClass:"date"},[n("span",{attrs:{title:t.date}},[t._v(t._s(t.dateDiff))])])])])}),[],!1,null,null,null).exports},props:{showPrivateUsers:{type:Boolean,default:!1},public:{type:Boolean,default:!1},avatar:{type:String},profileStr:{type:String},self:{type:Boolean,default:!1},userName:{type:String},personalityType:{type:String},personalityCode:{type:String},date:{type:String},dateDiff:{type:String}}},m=Object(i.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"meta"},[t.public?n("CommentUser",{attrs:{avatar:t.avatar,"profile-url":"/profiles/"+t.profileStr,self:t.self,"user-name":t.userName,"personality-type":t.personalityType,"personality-code":t.personalityCode,date:t.date,"date-diff":t.dateDiff}}):t.showPrivateUsers?n("CommentUser",{attrs:{avatar:t.avatar,self:t.self,"user-name":t.userName,"personality-type":t.personalityType,"personality-code":t.personalityCode,date:t.date,"date-diff":t.dateDiff}}):n("CommentAnonymous",{attrs:{self:t.self,date:t.date,"date-diff":t.dateDiff}})],1)}),[],!1,null,null,null).exports,u={name:"CommentLike",props:{id:{type:Number,required:!0},upvotedByUser:{type:Boolean,default:!1},reputation:{type:Number,default:0}},data:function(){return{busy:!1,modifiableReputation:this.reputation,modifiableUpvoted:this.upvotedByUser}},methods:{request:function(){var t=this;if(!this.busy){this.busy=!0;var e="/voting/comment/".concat(this.id),n={id:this.id};this.toggle(),this.$api.post(e,n).catch((function(e){return t.toggle()})).finally((function(){return t.busy=!1}))}},toggle:function(){this.modifiableUpvoted?this.downvote():this.upvote()},upvote:function(){this.modifiableReputation++,this.modifiableUpvoted=!0,this.$emit("like",this.id)},downvote:function(){this.modifiableReputation--,this.modifiableUpvoted=!1,this.$emit("unlike",this.id)}}},p={name:"CommentActions",components:{CommentLike:Object(i.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"like",class:{liked:t.modifiableUpvoted},on:{click:t.request}},[n("span",{staticClass:"f16 f16-thumbs-up"}),t._v(" Like \n    "),t.modifiableReputation>0?n("span",[t._v("("+t._s(t.modifiableReputation)+")")]):t._e()])}),[],!1,null,null,null).exports},props:{comment:{type:Object,required:!0},parentId:{type:[Number,String]},likeable:{type:Boolean,default:!1}},methods:{reply:function(){this.$emit("reply",this.parentId)}}},d={name:"CommentSingle",components:{CommentMeta:m,CommentActions:Object(i.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"actions"},[n("div",{staticClass:"reply",on:{click:t.reply}},[n("span",{staticClass:"far fa-reply"}),t._v(" Reply\n    ")]),t._v(" "),!t.comment.own&&t.likeable?n("CommentLike",{attrs:{id:t.comment.id,"upvoted-by-user":t.comment.upvotedByUser,reputation:t.comment.reputation}}):t._e()],1)}),[],!1,null,null,null).exports},props:{auth:{type:Boolean,required:!0},comment:{type:Object,required:!0},showPrivateUsers:{type:Boolean,default:!1},likeable:{type:Boolean,default:!1},subcommentKey:{type:String,default:"comments"}},computed:{normalizedSubcomments:function(){return this.comment[this.subcommentKey]||[]},normalizedHasResponses:function(){return this.comment.hasResponses||this.normalizedSubcomments.length>0}},methods:{createReply:function(t){this.$emit("reply",t)},normalizePersonalityType:function(t){return t.type||t.niceType},normalizePersonalityCode:function(t){return t.typeCode||t.code},normalizeDate:function(t){return t.date||t.dateCreated},normalizeDateDiff:function(t){return t.dateDiff||t.dateCreatedDiff}}},f=Object(i.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CommentMeta",{attrs:{"show-private-users":t.showPrivateUsers,public:t.comment.hasPublicProfile,avatar:t.comment.avatar,"profile-str":t.comment.profileUrl,self:t.comment.own,"user-name":t.comment.name,"personality-type":t.normalizePersonalityType(t.comment),"personality-code":t.normalizePersonalityCode(t.comment),date:t.normalizeDate(t.comment),"date-diff":t.normalizeDateDiff(t.comment)}}),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.comment.content))]),t._v(" "),t.auth?n("CommentActions",{attrs:{likeable:t.likeable,comment:t.comment,"parent-id":t.comment.id},on:{reply:t.createReply}}):t._e(),t._v(" "),t.normalizedHasResponses?t._l(t.normalizedSubcomments,(function(e){return n("div",{staticClass:"comment-wrapper subcomment"},[n("CommentMeta",{attrs:{"show-private-users":t.showPrivateUsers,public:e.hasPublicProfile,avatar:e.avatar,"profile-str":e.profileUrl,self:e.own,"user-name":e.name,"personality-type":t.normalizePersonalityType(e),"personality-code":t.normalizePersonalityCode(e),date:t.normalizeDate(e),"date-diff":t.normalizeDateDiff(e)}}),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),t.auth?n("CommentActions",{attrs:{likeable:t.likeable,comment:e,"parent-id":t.comment.id},on:{reply:t.createReply}}):t._e()],1)})):t._e()],2)}),[],!1,null,null,null).exports,v={name:"AbstractCommentCreate",props:{contentType:{type:String,required:!0},contentId:{type:[Number,String],required:!0},endpoint:{type:String,required:!0},parentId:{type:[Number,String]},postDataFn:{type:Function,required:!0}},data:function(){return{commentText:"",posted:!1,busy:!1}},watch:{parentId:function(){this.clear()}},computed:{postData:function(){return this.postDataFn(this.contentType,this.contentId,this.parentId,this.commentText)}},methods:{store:function(){var t=this;if(!this.busy&&this.commentText)return this.busy=!0,this.$api.post(this.endpoint,this.postData).then((function(e){t.$emit("created",{comment:e.data,parentId:t.parentId}),t.posted=!0})).finally((function(){return t.busy=!1}))},clear:function(){this.commentText="",this.posted=!1}}},h=Object(i.a)(v,void 0,void 0,!1,null,null,null).exports,y={name:"CommentCreateModal",extends:h,computed:{shown:function(){return!!this.modalIsOpen("newComment")}},methods:{open:function(){this.openModal("newComment")},hide:function(){this.closeModal("newComment"),this.clear()}}},b=Object(i.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shown?n("modal",{staticClass:"app-modal new-comment hidden-modal",class:{shown:t.shown}},[n("div",{staticClass:"modal-background",on:{click:t.hide}}),t._v(" "),n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-header"},[n("button",{staticClass:"close",on:{click:t.hide}},[n("span",{staticClass:"fal fa-times"})])]),t._v(" "),t.posted?[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"title"},[t._v("Thank You!")]),t._v(" "),n("p",[t._v("Your comment will be published shortly.")])]),t._v(" "),n("div",{staticClass:"modal-actions"},[n("button",{staticClass:"btn btn-action",on:{click:t.hide}},[t._v("Close")])])]:[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"title"},[t._v("New Comment")]),t._v(" "),n("p",[t._v("Please enter your comment below.")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.commentText,expression:"commentText",modifiers:{trim:!0}}],attrs:{autofocus:""},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"modal-actions"},[n("button",{staticClass:"btn btn-action",attrs:{disabled:t.busy},on:{click:t.store}},[t.busy?[n("svg",{staticClass:"fa-spin fa-spinner-third",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("use",{attrs:{"xlink:href":"#spin-icon"}})]),t._v("\n                        Saving...\n                    ")]:[t._v("Save")]],2)])],t._v(" "),n("div",{staticClass:"background"})],2)]):t._e()}),[],!1,null,null,null).exports,_={name:"CommentCreate",extends:h,props:{avatar:{type:String},placeholder:{type:String,default:"Please write your question or comment here..."},parentId:{type:[Number,String]}}},C=Object(i.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-comment"},[n("div",{staticClass:"wrapper"},[t.avatar?n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar}})]):t._e(),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.commentText,expression:"commentText",modifiers:{trim:!0}}],attrs:{placeholder:t.placeholder},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"action-row"},[n("button",{staticClass:"btn btn-action-2",attrs:{disabled:t.busy},on:{click:t.store}},[t.busy?[n("svg",{staticClass:"fa-spin fa-spinner-third",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("use",{attrs:{"xlink:href":"#spin-icon"}})]),t._v(" Publishing...\n            ")]:[t._v("Publish")]],2)])])}),[],!1,null,null,null).exports,O=n("L2JU");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={name:"CommentList",components:{CommentNew:a,CommentSingle:f,CommentCreateModal:b,CommentCreate:C},SHOW_LIKE_BUTTON:!0,SHOW_PRIVATE_USERS:!1,SHOW_COMMENT_FORM:!1,SUBCOMMENT_KEY:"comments",MAX_COMMENTS:5,props:{auth:{type:Boolean,required:!0},authAvatar:{type:String},comments:{type:[Object,Array],default:function(){return[]}},total:{type:Number},contentType:{type:String,required:!1},contentId:{type:[String,Number],required:!1},endpointStore:{type:String,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(O.b)({vuexContentType:function(t){return t.comment.contentType},vuexContentId:function(t){return t.comment.contentId}}),{computedContentType:function(){return this.contentType||this.vuexContentType},computedContentId:function(){return this.contentId||this.vuexContentId},none:function(){return!this.modifiableComments.length}}),mounted:function(){console.assert(this.computedContentType),console.assert(this.computedContentId)},data:function(){return{replyingTo:null,modifiableComments:this.comments}},methods:{GET_POST_DATA_FN:function(t,e,n,o){console.error("Abstract method for CommentList must be overwrittin. GET_POST_DATA_FN")},createNew:function(){this.replyingTo=null,this.$options.SHOW_COMMENT_FORM||this.$refs.modal.open()},createReply:function(t){this.replyingTo=t,this.$refs.modal.open()},created:function(t){var e=this,n=t.comment,o=t.parentId;if((n||{}).id)if(o)this.modifiableComments=this.modifiableComments.map((function(t){return t.id===o&&t[e.$options.SUBCOMMENT_KEY].push(n),t}));else{var i=this.modifiableComments;i.unshift(n),i.length>10&&i.pop(),this.modifiableComments=i,this.$store.dispatch("comment/addComment")}this.$emit("created",n),this.$options.SHOW_COMMENT_FORM&&this.$refs.form.clear()}}},T=Object(i.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$options.SHOW_COMMENT_FORM?n("CommentCreate",{ref:"form",attrs:{avatar:t.authAvatar,"content-type":t.computedContentType,"content-id":t.computedContentId,endpoint:t.endpointStore,"post-data-fn":t.GET_POST_DATA_FN,"parent-id":null},on:{created:t.created}}):n("CommentNew",{attrs:{auth:t.auth},on:{create:t.createNew}}),t._v(" "),n("a",{attrs:{name:"comments"}}),t._v(" "),t.none?n("p",{staticClass:"no-comments"},[t._v("No comments yet.")]):[t._l(t.modifiableComments,(function(e){return n("div",{staticClass:"comment-wrapper"},[n("CommentSingle",{key:e.id,attrs:{auth:t.auth,"show-private-users":t.$options.SHOW_PRIVATE_USERS,comment:e,likeable:t.$options.SHOW_LIKE_BUTTON,"subcomment-key":t.$options.SUBCOMMENT_KEY},on:{reply:t.createReply}})],1)})),t._v(" "),t.total>=t.$options.MAX_COMMENTS?t._t("pagination"):t._e()],t._v(" "),n("transition",{attrs:{name:"slide-fade"}},[n("CommentCreateModal",{ref:"modal",attrs:{"content-type":t.computedContentType,"content-id":t.computedContentId,"parent-id":t.replyingTo,endpoint:t.endpointStore,"post-data-fn":t.GET_POST_DATA_FN},on:{created:t.created}})],1)],2)}),[],!1,null,null,null);e.a=T.exports},YEGh:function(t,e,n){"use strict";n.r(e);var o=n("L2JU"),i=n("1gSD");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r={name:"PersonalNotes",props:{lastUpdatedDiff:{type:String},content:{type:String},endpointSave:{type:String}},data:function(){return{input:this.content,saving:!1,saved:!1,updated:this.lastUpdatedDiff}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.b)({commentObjectType:function(t){return t.comment.contentType},commentObjectId:function(t){return t.comment.contentId}})),mounted:function(){this.$store.dispatch("comment/setNotes",!!this.content)},methods:{save:function(){var t=this;if(this.saving)return!1;this.saving=!0;var e={notes:this.input,objectType:this.commentObjectType,objectId:this.commentObjectId};this.$api.post(this.endpointSave,e).then((function(e){t.saved=!0,t.updated="moments ago",t.$emit("saved"),t.$store.dispatch("comment/setNotes",!!t.input),Object(i.a)(3e3).then((function(){return t.saved=!1}))})).finally((function(){return t.saving=!1}))}}},c=n("KHd+"),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.input,expression:"input",modifiers:{trim:!0}}],attrs:{placeholder:"Make some personal notes here. No one else will see them."},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("div",{staticClass:"action-row"},[n("div",{staticClass:"last-updated"},[t.updated?n("span",[t._v("Last updated "+t._s(t.updated))]):t._e()]),t._v(" "),n("button",{staticClass:"btn btn-action-2",attrs:{disabled:t.saving},on:{click:t.save}},[t.saving?[n("svg",{staticClass:"fa-spin fa-spinner-third",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("use",{attrs:{"xlink:href":"#spin-icon"}})]),t._v(" Saving...\n            ")]:t.saved?[n("span",{staticClass:"fal fa-check"}),t._v(" Saved!\n            ")]:[t._v("Save")]],2)])])}),[],!1,null,null,null);e.default=l.exports},ZL5A:function(t,e,n){"use strict";n.r(e);var o=n("L2JU");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={name:"CommentTab",props:{tab:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},mounted:function(){var t=this;this.active&&this.makeActive(),window.location.hash==="#".concat(this.tab)&&this.$nextTick((function(){return t.makeActive()}))},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.b)({commentsActiveTab:function(t){return t.comment.activeTab}}),{isActive:function(){return this.commentsActiveTab===this.tab}}),methods:{makeActive:function(){this.$store.dispatch("comment/setTab",this.tab),this.$emit("active",window)}}},r=n("KHd+"),c=Object(r.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"switch",class:{active:this.isActive},on:{click:this.makeActive}},[this._t("default")],2)}),[],!1,null,null,null);e.default=c.exports},rxgU:function(t,e,n){"use strict";n.r(e);var o={name:"CommentListForCommunity",extends:n("WZgE").a,SHOW_LIKE_BUTTON:!1,SHOW_PRIVATE_USERS:!0,SHOW_COMMENT_FORM:!0,SUBCOMMENT_KEY:"comments",methods:{GET_POST_DATA_FN:function(t,e,n,o){return{comment:o,parentId:n,objectType:t,objectId:e}}},props:{endpointDelete:{type:String,required:!1}}},i=n("KHd+"),a=Object(i.a)(o,void 0,void 0,!1,null,null,null);e.default=a.exports}}]);
//# sourceMappingURL=comment-chunk.js.map?id=5ac4b56dcc77faa45f51