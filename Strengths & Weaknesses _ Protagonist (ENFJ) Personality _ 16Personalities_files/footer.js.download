"use strict";var touchScreen=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in window,articleEl1=document.querySelectorAll("article.main.description")[0],articleEl2=document.querySelectorAll("article .article-content")[0],popupEl=document.querySelectorAll(".social-popup")[0];function hideSocialPopup(){popupEl.classList.contains("active")&&popupEl.classList.remove("active")}function showSocialPopup(){popupEl.classList.contains("active")||popupEl.classList.add("active")}function checkIfValidSelection(e){return void 0!==articleEl1?articleEl1.contains(e.startContainer)&&articleEl1.contains(e.endContainer):void 0!==articleEl2&&(articleEl2.contains(e.startContainer)&&articleEl2.contains(e.endContainer))}function checkSelection(){var e=document.body,t=window.getSelection();if(e&&t&&""!==t.toString().trim()&&t.rangeCount>0){var o=t.getRangeAt(0),n=o.getBoundingClientRect();if(!n)return;if(!checkIfValidSelection(o))return void hideSocialPopup();var i=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+n.top,c=o.toString(),a=encodeURIComponent(c.length>240?c.substring(0,240)+"...":c),l=[location.protocol,"//",location.host,location.pathname].join(""),s="https://twitter.com/intent/tweet?text=“"+a+"”&url="+l+"&via=16Personalities&hashtags=16Personalities",r="mailto:?body=“"+c+"”%0D%0A%0D%0A"+l;popupEl.querySelectorAll("a.twitter")[0].href=s,popupEl.querySelectorAll("a.email")[0].href=r,popupEl.style.top=i-35+"px",popupEl.style.left=n.left+"px",showSocialPopup()}else hideSocialPopup()}var mouseDownTaskId=null,mouseUpTaskId=null,resizeTaskId=null;function triggerFBShare(e){void 0===window.fbAsyncInit?loadFBSDK(e):FB.ui({method:"share",href:e},function(e){})}function checkCommentIntersection(){if("IntersectionObserver"in window){var e=new IntersectionObserver(function(e){e[0].intersectionRatio<=0||void 0===window.fbAsyncInit&&loadFBSDK()},{rootMargin:"0px 0px -200px 0px"});document.querySelectorAll(".comments-wrapper.comp:not(.no-fb)").forEach(function(t){e.observe(t)})}else loadFBSDK()}function loadFBSDK(e){var t,o,n,i,c;window.fbAsyncInit=function(){FB.init({appId:"326516237427150",xfbml:!0,version:"v2.10"}),void 0!==e&&FB.ui({method:"share",href:e},function(e){})},t=document,o="script",n="facebook-jssdk",c=t.getElementsByTagName(o)[0],t.getElementById(n)||((i=t.createElement(o)).id=n,i.src="//connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(i,c))}document.body&&!touchScreen&&(document.addEventListener("mousedown",function(e){null!==mouseDownTaskId&&clearTimeout(mouseDownTaskId),mouseDownTaskId=setTimeout(function(){mouseDownTaskId=null,e.target.closest(".social-popup")||e.target.parent&&e.target.parent.closest(".social-popup")||hideSocialPopup()},40)}),document.addEventListener("mouseup",function(e){null!==mouseUpTaskId&&clearTimeout(mouseUpTaskId),mouseUpTaskId=setTimeout(function(){if(mouseUpTaskId=null,e.target.closest(".social-popup")||e.target.parent&&e.target.parent.closest(".social-popup"))return!1;checkSelection()},160)}),window.addEventListener("resize",function(){null!==resizeTaskId&&clearTimeout(resizeTaskId),resizeTaskId=setTimeout(function(){resizeTaskId=null,checkSelection()},200)})),window.addEventListener?addEventListener("DOMContentLoaded",checkCommentIntersection):window.attachEvent&&attachEvent("onDOMContentLoaded",checkCommentIntersection);
